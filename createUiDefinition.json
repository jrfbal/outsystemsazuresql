{
	"$schema":"https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json",
    "handler": "Microsoft.Compute.MultiVm",
    "version": "0.1.2-preview",
    "parameters": {
        "basics": [

        ],
      "steps": [
        {
          "name": "TrialSetup",
          "label": "OutSystems Trial Setup",
          "subLabel": {
            "preValidation": "Configure the Trial",
            "postValidation": "Done"
          },
          "bladeTitle": "Trial Settings",
          "elements": [
			{
              "name": "adminUsername",
              "type": "Microsoft.Compute.UserNameTextBox",
              "label": "Username",
              "toolTip": "Admin username for the virtual machine and SQL server.",
              "osPlatform": "Windows"
            },
			{
              "name": "adminPassword",
              "type": "Microsoft.Compute.CredentialsCombo",
              "label": {
                "password": "Password",
                "confirmPassword": "Confirm password"
              },
              "toolTip": {
                "password": "Admin password for the VM and SQL."
              }
            },
			{
              "name": "sqlname",
              "type": "Microsoft.Common.TextBox",
              "label": "DB name prefix",
              "toolTip": "SQL database name prefix",
              "defaultValue": "",
              "constraints": {
                "required": true				
              }
            }

          ]
        },
        {
          "name": "VMsetup",
          "label": "Virtual Machine Setup",
          "subLabel": {
            "preValidation": "Configure the Front-End Environment",
            "postValidation": "Done"
          },
          "bladeTitle": "VM Settings",
          "elements": [
            {
              "name": "FENAME",
              "type": "Microsoft.Common.TextBox",
              "label": "VM hostname",
              "toolTip": "Hostname for the VM.",
              "defaultValue": "OutSystems",
              "constraints": {
                "required": true
              }
            },

            {
              "name": "FEVmSize",
              "type": "Microsoft.Compute.SizeSelector",
              "label": "Front-End Virtual machine size",
              "toolTip": "The size of the Front-End VMs.",
              "recommendedSizes": [
                "Standard_D2_v2",
                "Standard_D3_v2"
              ],
              "constraints": {
                "required": true,
                "allowedSizes": [
                  "Standard_D2_v2",
                  "Standard_D3_v2",
                  "Standard_D4_v2",
                  "Standard_D1",
                  "Standard_D1_v2",
                  "Standard_D2",
                  "Standard_DS2",
                  "Standard_D3",
                  "Standard_DS3",
                  "Standard_D4",
                  "Standard_DS4",
                  "Standard_D11",
                  "Standard_DS11",
                  "Standard_D12",
                  "Standard_DS12",
                  "Standard_D13",
                  "Standard_DS13",
                  "Standard_D14",
                  "Standard_DS14"
                ]
              },
              "osPlatform": "Windows",
              "imageReference": {
                "publisher": "MicrosoftWindowsServer",
                "offer": "WindowsServer",
                "sku": "2016-Datacenter"
              }
            }
          ]
        },

		
		
      ],
      "outputs": {
        "adminUserName": "[steps('TrialSetup').adminUsername]",
        "adminLoginPassword": "[steps('TrialSetup').adminPassword.password]",
        "DBnameparam": "[steps('VMsetup').FENAME]",
        "FEVmSize": "[steps('VMsetup').FEVmSize]",
        "location": "[location()]"

      }
    }
}
